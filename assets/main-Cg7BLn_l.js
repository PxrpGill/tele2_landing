(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const T=document.querySelector(".main"),f=document.querySelector(".header"),u=document.querySelector(".header__geoposition-button");let y=document.querySelector(".main__container"),N;function q(s){const e=document.createElement("div");return e.className="main__modal-container",e.style.position="absolute",e.appendChild(s),e}function C(s,e,t){t.close(),y.contains(s)&&y.removeChild(s),T.style.opacity=1,document.body.style.overflow="",document.body.classList.remove("modal-open"),document.body.style.paddingRight=e}function x(){const s=window.getComputedStyle(document.body).paddingRight,e=window.innerWidth-document.documentElement.clientWidth;return window.innerWidth>992&&(document.body.classList.add("modal-open"),document.body.style.paddingRight=`${parseInt(s)+e}px`),s}function I(){let e=document.querySelector(".change-region").content.cloneNode(!0),t=e.querySelector(".change-region__modal-window"),i=e.querySelectorAll(".change-region__item-button");T.style.opacity=0,document.body.style.overflow="hidden";let n=q(e);y.appendChild(n),t.showModal();const o=x();i.forEach(l=>{const r=()=>{localStorage.setItem("region",l.textContent),u.textContent=localStorage.getItem("region"),C(n,o,t),l.removeEventListener("click",r)};l.addEventListener("click",r)}),document.addEventListener("keydown",function l(r){r.key==="Escape"&&(C(n,o,t),document.removeEventListener("keydown",l))}),u.removeEventListener("click",L)}function p(s,e,t){clearTimeout(N),document.body.style.overflow="",t.close(),f.contains(s)&&f.removeChild(s),document.body.classList.remove("modal-open"),document.body.style.paddingRight=e}function L(){let e=document.querySelector(".choose-region-question").content.cloneNode(!0),t=e.querySelector(".choose-region-question__modal-window"),i=t.querySelector(".choose-region-question__agree-button"),n=t.querySelector(".choose-region-question__change-city-button"),o=q(e);f.appendChild(o);const l=x();N=setTimeout(()=>{t.showModal()},100),document.body.style.overflow="hidden",i.addEventListener("click",function r(){p(o,l,t),i.removeEventListener("click",r),o.remove(),o=null}),n.addEventListener("click",function r(){p(o,l,t),I(),n.removeEventListener("click",r)}),document.addEventListener("keydown",function r(a){a.key==="Escape"&&(p(o,l,t),document.removeEventListener("keydown",r))}),u.removeEventListener("click",L)}localStorage.getItem("region")?u.textContent=localStorage.getItem("region"):L();u.addEventListener("click",I);document.addEventListener("DOMContentLoaded",()=>{const s=document.querySelector(".main__to-scroll-up-button");window.scrollY>500?s.style.display="block":s.style.display="none",window.addEventListener("scroll",()=>{window.scrollY>500?s.style.display="block":s.style.display="none"}),window.addEventListener("beforeunload",function(){localStorage.getItem("region")||this.window.scrollTo({top:0,left:0})});function e(){window.scrollTo({top:0,behavior:"smooth"})}s.addEventListener("click",e)});function h(s,e){let t;function i(...n){t||(s.apply(this,n),t=setTimeout(()=>{t=null},e))}return i.cancel=function(){t&&(clearTimeout(t),t=null)},i}class R{constructor(){this.itemsInPage=3,this.totalPages=0,this.isScrolling=!1,this.sliderPlace=document.querySelector(".main__slider-items"),this.sliderMarkersPlace=document.querySelector(".main__slider-markers"),this.prevButton=document.querySelector(".main__slider-control.prev"),this.nextButton=document.querySelector(".main__slider-control.next"),this.dots=`
            <li class="main__slider-marker">
                <span>...</span>
            </li>`,this.firstMarker=`
            <li class="main__slider-marker">
                <a href="#" data-page="1">
                    1
                </a>
            </li>`,this.throttledScroll=h(this.onScroll.bind(this),750),this.throttledWheel=h(this.onWheel.bind(this),750),this.throttledPrevClick=h(this.onPrevClick.bind(this),750),this.throttledNextClick=h(this.onNextClick.bind(this),750),this.addScrollEventListener(),this.addClickEventListeners()}generateLastMarker(){return`
            <li class="main__slider-marker">
                <a href="#" data-page="${this.totalPages}">
                    ${this.totalPages}
                </a>
            </li>`}generateNextMarker(e){return`
            <li class="main__slider-marker">
                <a href="#" data-page="${e+1}">
                    ${e+1}
                </a>
            </li>`}generateCurrentMarker(e){return`
            <li class="main__slider-marker active">
                <a href="#" data-page="${e}">
                    ${e}
                </a>
            </li>`}generatePrevMarker(e){return`
            <li class="main__slider-marker">
                <a href="#" data-page="${e-1}">
                    ${e-1}
                </a>
            </li>`}generateSliderElement(e,t,i){return`
            <a id="item-${e+t}">
                <img class="main__slider-image" src="${i.avatar_url}" alt="Картинка пользователя" draggable="false">
            </a>`}inputInDOM(e){this.sliderPlace.innerHTML="",this.sliderMarkersPlace.innerHTML="";for(let t=0;t<e.length;t+=this.itemsInPage){const i=e.slice(t,t+this.itemsInPage);let n='<li class="main__slider-item">';i.forEach((o,l)=>{n+=this.generateSliderElement(t,l,o)}),n+="</li>",this.sliderPlace.innerHTML+=n}this.totalPages=Math.ceil(e.length/this.itemsInPage),this.generatePaginationMarkers(1),this.addClickEventListeners(),this.updateMarkersVisibility(0)}addScrollEventListener(){this.sliderPlace.addEventListener("scroll",this.throttledScroll),this.sliderPlace.addEventListener("wheel",this.throttledWheel)}onScroll(){this.isScrolling||(this.isScrolling=!0,setTimeout(()=>{const e=this.getCurrentSlideIndex(this.sliderPlace);this.updateMarkersVisibility(e),this.isScrolling=!1},750))}onWheel(e){if(e.shiftKey){e.preventDefault();const t=this.sliderPlace.clientWidth,i=Math.round(e.deltaY/100)*t;this.sliderPlace.scrollTo({left:this.sliderPlace.scrollLeft+i,behavior:"smooth"});const n=this.getCurrentSlideIndex(this.sliderPlace);this.updateMarkersVisibility(n)}}getCurrentSlideIndex(e){const t=Array.from(e.children),i=e.scrollLeft+e.clientWidth/2;for(let n=0;n<t.length;n++){const o=t[n];if(i>=o.offsetLeft&&i<o.offsetLeft+o.clientWidth)return n}return 0}updateMarkersVisibility(e){document.querySelectorAll(".main__slider-marker").forEach((i,n)=>{n===e?i.classList.add("active"):i.classList.remove("active")}),e===0?this.prevButton.style.display="none":this.prevButton.style.display="block",e===this.totalPages-1?this.nextButton.style.display="none":this.nextButton.style.display="block",this.generatePaginationMarkers(e+1)}generatePaginationMarkers(e){this.sliderMarkersPlace.innerHTML="",e!=1&&(this.sliderMarkersPlace.innerHTML+=this.firstMarker),e>3&&(this.sliderMarkersPlace.innerHTML+=this.dots),e>2&&(this.sliderMarkersPlace.innerHTML+=this.generatePrevMarker(e)),this.sliderMarkersPlace.innerHTML+=this.generateCurrentMarker(e),e<this.totalPages-1&&(this.sliderMarkersPlace.innerHTML+=this.generateNextMarker(e)),e<this.totalPages-2&&(this.sliderMarkersPlace.innerHTML+=this.dots),e!=this.totalPages&&(this.sliderMarkersPlace.innerHTML+=this.generateLastMarker()),this.addClickEventListeners()}addClickEventListeners(){document.querySelectorAll(".main__slider-marker a").forEach(t=>{t.addEventListener("click",i=>{i.preventDefault();const n=parseInt(i.target.closest("a").getAttribute("data-page"));this.scrollToPage(n)})}),this.prevButton.addEventListener("click",this.throttledPrevClick),this.nextButton.addEventListener("click",this.throttledNextClick)}onPrevClick(){const e=this.getCurrentSlideIndex(this.sliderPlace);e>0&&this.scrollToPage(e)}onNextClick(){const e=this.getCurrentSlideIndex(this.sliderPlace);e<this.totalPages-1&&this.scrollToPage(e+2)}scrollToPage(e){const t=this.sliderPlace.clientWidth,i=(e-1)*t;this.sliderPlace.scrollTo({left:i,behavior:"smooth"})}destroy(){this.sliderPlace.removeEventListener("scroll",this.throttledScroll),this.sliderPlace.removeEventListener("wheel",this.throttledWheel),this.prevButton.removeEventListener("click",this.throttledPrevClick),this.nextButton.removeEventListener("click",this.throttledNextClick)}}const O="https://api.github.com/users?per_page=99",$=async()=>{try{const s=await fetch(O);if(s.ok){const e=await s.json();new R().inputInDOM(e)}else console.error("Ошибка HTTP: "+s.status)}catch(s){console.error("Произошла ошибка:",s)}};$();const M=document.querySelector(".main__processing-personal-data-input-tel");function S(s){return s.value.replace(/\D/g,"")}function v(s){let e=s.target,t=S(e),i="",n=e.selectionStart;if(!t)return e.value="";if(e.value.length!=n){s.data&&/\D/g.test(s.data)&&(e.value=t);return}["7","8","9"].indexOf(t[0])>-1?(t[0]=="9"&&(t="7"+t),i=(t[0]=="8"?"8":"+7")+" ",t.length>1&&(i+="("+t.substring(1,4)),t.length>=5&&(i+=") "+t.substring(4,7)),t.length>=8&&(i+="-"+t.substring(7,9)),t.length>=10&&(i+="-"+t.substring(9,11))):(i="+"+t[0]+" ",t.length>1&&(i+="("+t.substring(1,4)),t.length>=5&&(i+=") "+t.substring(4,7)),t.length>=8&&(i+="-"+t.substring(7,9)),t.length>=10&&(i+="-"+t.substring(9,11))),e.value=i}function k(s){let e=s.target;s.keyCode==8&&S(e).length==1&&(e.value="")}function _(s){let e=s.clipboardData||window.clipboardData,t=s.target,i=S(t);if(e){let n=e.getData("Text");/\D/g.test(n)&&(t.value=i)}}M.addEventListener("input",v);M.addEventListener("keydown",k);M.addEventListener("paste",_);class B{constructor(){this.timeLiveMessage=5e3,this.successTemplate=document.querySelector(".main__success-message-template"),this.failedTemplate=document.querySelector(".main__failed-message-template"),this.failedMessagePhoneRetry="На этот номер уже выслан промокод",this.timers=[]}deleteMessageFromDOM(e){const t=setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},this.timeLiveMessage);this.timers.push(t)}clearMessages(e){for(;e.firstChild;)e.removeChild(e.firstChild)}outputFailedMessage(e,t){this.cleanupMessages();const i=this.failedTemplate.content.cloneNode(!0),n=document.createElement("div");n.className="main__message-container",n.appendChild(i),t.appendChild(n),this.deleteMessageFromDOM(n);const o=this.failedTemplate.content.cloneNode(!0),l=document.createElement("div");l.className="main__message-container",l.appendChild(o),l.querySelector(".main__info-message-text-message").textContent=this.failedMessagePhoneRetry,e.appendChild(l),this.deleteMessageFromDOM(l)}outputSuccessMessage(e,t){this.cleanupMessages();const i=this.successTemplate.content.cloneNode(!0),n=document.createElement("div");n.className="main__message-container",n.appendChild(i),t.appendChild(n),this.deleteMessageFromDOM(n);const o=this.successTemplate.content.cloneNode(!0),l=document.createElement("div");l.className="main__message-container",l.appendChild(o),e.appendChild(l),this.deleteMessageFromDOM(l)}setNumberInLocalStorage(e){const t=new Date;localStorage.setItem(String(t),e)}phoneInLocalStorage(e){let t=!1;for(let i in localStorage)if(localStorage.hasOwnProperty(i)&&i!="region"){const n=localStorage.getItem(i);e==n&&(t=!0)}return t}validatePhoneNumber(e){return/(\+7|[0-689])\s\(\d{3}\)\s\d{3}-\d{2}-\d{2}/.test(e)}dataProcessing(e,t,i,n,o,l){e.preventDefault();const r=l.value;if(!t.checked||r==""){o.style.background="gray";const a=setTimeout(()=>{o.style.background="white"},this.timeLiveMessage);this.timers.push(a)}else this.validatePhoneNumber(r)?this.phoneInLocalStorage(r)?this.outputFailedMessage(i,n):(this.setNumberInLocalStorage(r),this.outputSuccessMessage(i,n)):this.outputFailedMessage(i,n)}clearTimers(){this.timers.forEach(e=>clearTimeout(e)),this.timers=[]}cleanupMessages(){document.querySelectorAll(".main__message-container").forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this.clearTimers()}}const H=document.querySelector(".main__processing-personal-data-input-tel"),A=document.querySelector(".main__info-message-computers"),F=document.querySelector(".main__info-message-phone"),V=document.querySelector(".main__processing-personal-data-agree"),D=document.querySelector(".main__processing-personal-data-submit"),K=new B;function Q(s){s.preventDefault(),K.dataProcessing(s,V,F,A,D,H)}D.addEventListener("click",Q);const Y=document.querySelector(".main__stocks-content-participate-button");Y.addEventListener("click",()=>{let s=document.querySelector(".main__participate"),e=s.content.cloneNode(!0),t=e.querySelector(".main__participate-modal-window"),i=t.querySelector(".main__processing-personal-data-input-tel"),n=t.querySelector(".main__processing-personal-data-agree"),o=t.querySelector(".main__processing-personal-data-submit"),l=t.querySelector(".main__participate-close-button"),r=t.querySelector(".main__info-message-phone"),a=t.querySelector(".main__info-message-computers"),c=document.createElement("div");c.className="main__modal-container";const b=document.querySelector(".main__container");c.appendChild(e),b.appendChild(c),t.showModal(),document.body.style.overflow="hidden";const d=document.body,w=parseInt(window.getComputedStyle(d).paddingRight,10)||0,W=window.innerWidth-document.documentElement.clientWidth;d.classList.add("modal-open"),d.style.paddingRight=`${w+W}px`;const m=()=>{t.close(),b.removeChild(c),document.body.style.overflow="",d.classList.remove("modal-open"),d.style.paddingRight=`${w}px`,l.removeEventListener("click",m),document.removeEventListener("keydown",E),i.removeEventListener("input",v),i.removeEventListener("keydown",k),i.removeEventListener("paste",_),o.removeEventListener("click",P),s=null,e=null,t=null,i=null,n=null,o=null,l=null,r=null,a=null,c=null},E=g=>{g.key==="Escape"&&m()},P=g=>{new B().dataProcessing(g,n,r,a,o,i)};l.addEventListener("click",m),document.addEventListener("keydown",E),i.addEventListener("input",v),i.addEventListener("keydown",k),i.addEventListener("paste",_),o.addEventListener("click",P)});
