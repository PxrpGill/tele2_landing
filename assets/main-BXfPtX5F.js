(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function C(i,e){const t={data:e,timestamp:new Date().getTime()};localStorage.setItem(i,JSON.stringify(t))}function p(i){const t=JSON.parse(localStorage.getItem(i));return t?new Date().getTime()-t.timestamp>864e5?(localStorage.removeItem(i),null):t.data:null}const R=document.querySelector(".main"),P=document.querySelector(".header"),d=document.querySelector(".header__geoposition-button");let T=document.querySelector(".main__container");const k=document.querySelector(".main__to-scroll-up-button");function $(i){const e=document.createElement("div");return e.className="main__modal-container",e.style.position="absolute",e.appendChild(i),e}function O(i,e,t){t.close(),T.contains(i)&&T.removeChild(i),R.style.opacity=1,document.body.style.overflow="",document.body.classList.remove("modal-open"),document.body.style.paddingRight=e,k.style.display="block"}function L(){const i=window.getComputedStyle(document.body).paddingRight,e=window.innerWidth-document.documentElement.clientWidth;return window.innerWidth>992&&(document.body.classList.add("modal-open"),document.body.style.paddingRight=`${parseInt(i)+e}px`),i}function A(){let e=document.querySelector(".change-region").content.cloneNode(!0),t=e.querySelector(".change-region__modal-window"),n=e.querySelectorAll(".change-region__item-button");R.style.opacity=0,document.body.style.overflow="hidden";let s=$(e);T.appendChild(s),t.showModal(),k.style.display="none";const o=L();n.forEach(l=>{const r=()=>{C("region",l.textContent),d.textContent=p("region"),O(s,o,t),l.removeEventListener("click",r)};l.addEventListener("click",r)}),document.addEventListener("keydown",function l(r){r.key==="Escape"&&(O(s,o,t),document.removeEventListener("keydown",l))}),d.removeEventListener("click",D)}function w(i,e,t){document.body.style.overflow="",t.close(),P.contains(i)&&P.removeChild(i),document.body.classList.remove("modal-open"),document.body.style.paddingRight=e,k.style.display="block"}function D(){let e=document.querySelector(".choose-region-question").content.cloneNode(!0),t=e.querySelector(".choose-region-question__modal-window"),n=t.querySelector(".choose-region-question__agree-button"),s=t.querySelector(".choose-region-question__change-city-button"),o=$(e);P.appendChild(o);const l=L();t.showModal(),k.style.display="none",document.body.style.overflow="hidden",n.addEventListener("click",function r(){w(o,l,t),n.removeEventListener("click",r),o.remove(),C("region","Санкт-Петербург"),d.textContent=p("region")}),s.addEventListener("click",function r(){w(o,l,t),A(),s.removeEventListener("click",r)}),document.addEventListener("keydown",function r(a){a.key==="Escape"&&(w(o,l,t),document.removeEventListener("keydown",r),C("region","Санкт-Петербург"),d.textContent=p("region"))}),d.removeEventListener("click",D)}p("region")?d.textContent=p("region"):(d.textContent="Санкт-Петербург",D());d.addEventListener("click",A);document.addEventListener("DOMContentLoaded",()=>{const i=document.querySelector(".main__to-scroll-up-button");function e(){document.body.classList.contains("modal-open")?i.style.display="none":window.scrollY>500?i.style.display="block":i.style.display="none"}e(),window.addEventListener("scroll",e),new MutationObserver(()=>{e()}).observe(document.body,{attributes:!0,attributeFilter:["class"]});function n(){window.scrollTo({top:0,behavior:"smooth"})}i.addEventListener("click",n),window.addEventListener("beforeunload",()=>{p("region")||window.scrollTo({top:0,left:0})})});function f(i,e){let t;function n(...s){t||(i.apply(this,s),t=setTimeout(()=>{t=null},e))}return n.cancel=function(){t&&(clearTimeout(t),t=null)},n}function v(){const i=document.createElement("style");document.head.appendChild(i);try{return i.sheet.insertRule("@starting-style { body { color: red; } }",0),!0}catch{return!1}finally{document.head.removeChild(i)}}function V(i){const e=document.querySelector(".main__container"),t=document.querySelector(".main__to-scroll-up-button"),n=document.createElement("div");n.className="main__modal-container",n.style.position="absolute";const o=document.querySelector(".user-poppup").content.cloneNode(!0),l=o.querySelector(".user-poppup__modal-window"),r=o.querySelector(".user-poppup__close-button"),a=o.querySelector(".user-poppup__user-content"),c=`<img src="${i.avatar_url}" loading="lazy">`,b=`<h4 class="user-poppup__username">${i.login}</h4>`,M=`
        <p class="user-poppup__information">
            Ссылка на github: <a href="${i.html_url}" class="user-poppup__github-link" target="_blank">
                Перейти
            </a>
        </p>`;a.innerHTML+=b,a.innerHTML+=c,a.innerHTML+=M,n.appendChild(o),e.appendChild(n),l.showModal(),v()?console.log("Имеется поддержка @starting-style"):(l.style.transition="none",l.style.transform="translateY(-150%) scale(0)",l.style.opacity="0",l.classList.add("closing"),setTimeout(()=>{l.style.transition="transform 0.5s ease, opacity 0.5s ease",l.style.transform="translateY(0%) scale(1)",l.style.opacity="1",l.classList.remove("closing")},100)),t.style.display="none",document.body.style.overflow="hidden";const h=L(),u=()=>{v()?(l.classList.add("closing"),setTimeout(()=>{l.close(),e.removeChild(n),l.classList.remove("closing"),a.innerHTML=""},500)):(l.style.transition="transform 0.5s ease, opacity 0.5s ease",l.style.transform="translateY(-150%) scale(0)",l.style.opacity="0",l.classList.add("closing"),setTimeout(()=>{l.close(),e.removeChild(n),l.classList.remove("closing"),a.innerHTML=""},500)),r.removeEventListener("click",u),document.removeEventListener("keydown",g),document.body.style.paddingRight=h,document.body.classList.remove("modal-open"),t.style.display="block",document.body.style.overflow=""},g=y=>{y.key==="Escape"&&u()};r.addEventListener("click",u),document.addEventListener("keydown",g)}class Y{constructor(){this.itemsInPage=3,this.totalPages=0,this.isScrolling=!1,this.sliderPlace=document.querySelector(".main__slider-items"),this.sliderMarkersPlace=document.querySelector(".main__slider-markers"),this.prevButton=document.querySelector(".main__slider-control.prev"),this.nextButton=document.querySelector(".main__slider-control.next"),this.dots=`
            <li class="main__slider-marker">
                <span>...</span>
            </li>`,this.firstMarker=`
            <li class="main__slider-marker">
                <a href="#" data-page="1">
                    1
                </a>
            </li>`,this.throttledScroll=f(this.onScroll.bind(this),750),this.throttledWheel=f(this.onWheel.bind(this),750),this.throttledPrevClick=f(this.onPrevClick.bind(this),750),this.throttledNextClick=f(this.onNextClick.bind(this),750),this.addScrollEventListener(),this.addClickEventListeners()}generateLastMarker(){return`
            <li class="main__slider-marker">
                <a href="#" data-page="${this.totalPages}">
                    ${this.totalPages}
                </a>
            </li>`}generateNextMarker(e){return`
            <li class="main__slider-marker">
                <a href="#" data-page="${e+1}">
                    ${e+1}
                </a>
            </li>`}generateCurrentMarker(e){return`
            <li class="main__slider-marker active">
                <a href="#" data-page="${e}">
                    ${e}
                </a>
            </li>`}generatePrevMarker(e){return`
            <li class="main__slider-marker">
                <a href="#" data-page="${e-1}">
                    ${e-1}
                </a>
            </li>`}generateSliderElement(e,t,n){return`
            <a id="item-${e+t}" popovertarget="mypopover">
                <img id="image-${e+t}" class="main__slider-image" src="${n.avatar_url}" alt="Картинка пользователя" draggable="false" loading="lazy" popovertarget="mypopover">
            </a>`}inputInDOM(e){this.sliderPlace.innerHTML="",this.sliderMarkersPlace.innerHTML="";for(let n=0;n<e.length;n+=this.itemsInPage){const s=e.slice(n,n+this.itemsInPage);let o='<li class="main__slider-item">';s.forEach((l,r)=>{o+=this.generateSliderElement(n,r,l)}),o+="</li>",this.sliderPlace.innerHTML+=o}this.sliderPlace.querySelectorAll(".main__slider-image").forEach(n=>{n.addEventListener("click",()=>{const s=+n.id.slice(6,n.id.length),o=e[s];V(o)})}),this.totalPages=Math.ceil(e.length/this.itemsInPage),this.generatePaginationMarkers(1),this.addClickEventListeners(),this.updateMarkersVisibility(0)}addScrollEventListener(){this.sliderPlace.addEventListener("scroll",this.throttledScroll),this.sliderPlace.addEventListener("wheel",this.throttledWheel)}onScroll(){this.isScrolling||(this.isScrolling=!0,setTimeout(()=>{const e=this.getCurrentSlideIndex(this.sliderPlace);this.updateMarkersVisibility(e),this.isScrolling=!1},750))}onWheel(e){if(e.shiftKey){e.preventDefault();const t=this.sliderPlace.clientWidth,n=Math.round(e.deltaY/100)*t;this.sliderPlace.scrollTo({left:this.sliderPlace.scrollLeft+n,behavior:"smooth"});const s=this.getCurrentSlideIndex(this.sliderPlace);this.updateMarkersVisibility(s)}}getCurrentSlideIndex(e){const t=Array.from(e.children),n=e.scrollLeft+e.clientWidth/2;for(let s=0;s<t.length;s++){const o=t[s];if(n>=o.offsetLeft&&n<o.offsetLeft+o.clientWidth)return s}return 0}updateMarkersVisibility(e){document.querySelectorAll(".main__slider-marker").forEach((n,s)=>{s===e?n.classList.add("active"):n.classList.remove("active")}),e===0?this.prevButton.style.display="none":this.prevButton.style.display="block",e===this.totalPages-1?this.nextButton.style.display="none":this.nextButton.style.display="block",this.generatePaginationMarkers(e+1)}generatePaginationMarkers(e){this.sliderMarkersPlace.innerHTML="",e!=1&&(this.sliderMarkersPlace.innerHTML+=this.firstMarker),e>3&&(this.sliderMarkersPlace.innerHTML+=this.dots),e>2&&(this.sliderMarkersPlace.innerHTML+=this.generatePrevMarker(e)),this.sliderMarkersPlace.innerHTML+=this.generateCurrentMarker(e),e<this.totalPages-1&&(this.sliderMarkersPlace.innerHTML+=this.generateNextMarker(e)),e<this.totalPages-2&&(this.sliderMarkersPlace.innerHTML+=this.dots),e!=this.totalPages&&(this.sliderMarkersPlace.innerHTML+=this.generateLastMarker()),this.addClickEventListeners()}addClickEventListeners(){document.querySelectorAll(".main__slider-marker a").forEach(t=>{t.addEventListener("click",n=>{n.preventDefault();const s=parseInt(n.target.closest("a").getAttribute("data-page"));this.scrollToPage(s)})}),this.prevButton.addEventListener("click",this.throttledPrevClick),this.nextButton.addEventListener("click",this.throttledNextClick)}onPrevClick(){const e=this.getCurrentSlideIndex(this.sliderPlace);e>0&&this.scrollToPage(e)}onNextClick(){const e=this.getCurrentSlideIndex(this.sliderPlace);e<this.totalPages-1&&this.scrollToPage(e+2)}scrollToPage(e){const t=this.sliderPlace.clientWidth,n=(e-1)*t;this.sliderPlace.scrollTo({left:n,behavior:"smooth"})}destroy(){this.sliderPlace.removeEventListener("scroll",this.throttledScroll),this.sliderPlace.removeEventListener("wheel",this.throttledWheel),this.prevButton.removeEventListener("click",this.throttledPrevClick),this.nextButton.removeEventListener("click",this.throttledNextClick)}}const K="https://api.github.com/users?per_page=99",Q=async()=>{try{const i=await fetch(K);if(i.ok){const e=await i.json();new Y().inputInDOM(e)}else console.error("Ошибка HTTP: "+i.status)}catch(i){console.error("Произошла ошибка:",i)}};Q();const I=document.querySelector(".main__processing-personal-data-input-tel");function B(i){return i.value.replace(/\D/g,"")}function q(i){let e=i.target,t=B(e),n="",s=e.selectionStart;if(!t)return e.value="";if(e.value.length!=s){i.data&&/\D/g.test(i.data)&&(e.value=t);return}["7","8","9"].indexOf(t[0])>-1?(t[0]=="9"&&(t="7"+t),n=(t[0]=="8"?"8":"+7")+" ",t.length>1&&(n+="("+t.substring(1,4)),t.length>=5&&(n+=") "+t.substring(4,7)),t.length>=8&&(n+="-"+t.substring(7,9)),t.length>=10&&(n+="-"+t.substring(9,11))):(n="+"+t[0]+" ",t.length>1&&(n+="("+t.substring(1,4)),t.length>=5&&(n+=") "+t.substring(4,7)),t.length>=8&&(n+="-"+t.substring(7,9)),t.length>=10&&(n+="-"+t.substring(9,11))),e.value=n}function N(i){let e=i.target;i.keyCode==8&&B(e).length==1&&(e.value="")}function x(i){let e=i.clipboardData||window.clipboardData,t=i.target,n=B(t);if(e){let s=e.getData("Text");/\D/g.test(s)&&(t.value=n)}}I.addEventListener("input",q);I.addEventListener("keydown",N);I.addEventListener("paste",x);class F{constructor(){this.timeLiveMessage=5e3,this.successTemplate=document.querySelector(".main__success-message-template"),this.failedTemplate=document.querySelector(".main__failed-message-template"),this.failedMessagePhoneRetry="На этот номер уже выслан промокод",this.timers=[]}deleteMessageFromDOM(e){const t=setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},this.timeLiveMessage);this.timers.push(t)}clearMessages(e){for(;e.firstChild;)e.removeChild(e.firstChild)}outputFailedMessage(e,t){this.cleanupMessages();const n=this.failedTemplate.content.cloneNode(!0),s=document.createElement("div");s.className="main__message-container",s.appendChild(n),t.appendChild(s),this.deleteMessageFromDOM(s);const o=this.failedTemplate.content.cloneNode(!0),l=document.createElement("div");l.className="main__message-container",l.appendChild(o),l.querySelector(".main__info-message-text-message").textContent=this.failedMessagePhoneRetry,e.appendChild(l),this.deleteMessageFromDOM(l)}outputSuccessMessage(e,t){this.cleanupMessages();const n=this.successTemplate.content.cloneNode(!0),s=document.createElement("div");s.className="main__message-container",s.appendChild(n),t.appendChild(s),this.deleteMessageFromDOM(s);const o=this.successTemplate.content.cloneNode(!0),l=document.createElement("div");l.className="main__message-container",l.appendChild(o),e.appendChild(l),this.deleteMessageFromDOM(l)}setNumberInLocalStorage(e){const t=new Date;localStorage.setItem(String(t),e)}phoneInLocalStorage(e){let t=!1;for(let n in localStorage)if(localStorage.hasOwnProperty(n)&&n!="region"){const s=localStorage.getItem(n);e==s&&(t=!0)}return t}validatePhoneNumber(e){return/(\+7|[0-689])\s\(\d{3}\)\s\d{3}-\d{2}-\d{2}/.test(e)}dataProcessing(e,t,n,s,o,l){e.preventDefault();const r=l.value;if(!t.checked||r==""){o.style.background="gray";const a=setTimeout(()=>{o.style.background="white"},this.timeLiveMessage);this.timers.push(a)}else this.validatePhoneNumber(r)?this.phoneInLocalStorage(r)?this.outputFailedMessage(n,s):(this.setNumberInLocalStorage(r),this.outputSuccessMessage(n,s)):this.outputFailedMessage(n,s)}clearTimers(){this.timers.forEach(e=>clearTimeout(e)),this.timers=[]}cleanupMessages(){document.querySelectorAll(".main__message-container").forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this.clearTimers()}}const _=document.querySelector(".main__processing-personal-data-input-tel"),z=document.querySelector(".main__info-message-computers"),J=document.querySelector(".main__info-message-phone"),W=document.querySelector(".main__processing-personal-data-agree"),m=document.querySelector(".main__processing-personal-data-submit"),j=new F;function G(i){i.preventDefault(),j.dataProcessing(i,W,J,z,m,_),_.value=""}function H(){_.value.trim()==""||!W.checked?(m.style.pointerEvents="none",m.style.background="gray"):(m.style.pointerEvents="",m.style.background="white")}_.addEventListener("input",H);W.addEventListener("change",H);m.style.pointerEvents="none";m.addEventListener("click",G);H();const U=document.querySelector(".main__stocks-content-participate-button");U.addEventListener("click",()=>{let e=document.querySelector(".main__participate").content.cloneNode(!0),t=e.querySelector(".main__participate-modal-window"),n=t.querySelector(".main__processing-personal-data-input-tel"),s=t.querySelector(".main__processing-personal-data-agree"),o=t.querySelector(".main__processing-personal-data-submit"),l=t.querySelector(".main__participate-close-button"),r=t.querySelector(".main__info-message-phone"),a=t.querySelector(".main__info-message-computers"),c=document.createElement("div");c.className="main__modal-container",c.style.position="absolute";const b=document.querySelector(".main__container");c.appendChild(e),b.appendChild(c),t.showModal(),v()?console.log("Имеется поддержка @starting-style"):(t.style.transition="none",t.style.transform="translateY(-150%) scale(0)",t.style.opacity="0",t.classList.add("close"),setTimeout(()=>{t.style.transition="transform 0.5s ease, opacity 0.5s ease",t.style.transform="translateY(0%) scale(1)",t.style.opacity="1",t.classList.remove("close")},100)),document.body.style.overflow="hidden";const M=L(),h=()=>{v()?(t.classList.add("close"),setTimeout(()=>{t.close(),main.removeChild(c),t.classList.remove("close"),userContent.innerHTML=""},500)):(t.style.transition="transform 0.5s ease, opacity 0.5s ease",t.style.transform="translateY(-150%) scale(0)",t.style.opacity="0",t.classList.add("close"),setTimeout(()=>{t.close(),main.removeChild(c),t.classList.remove("close"),userContent.innerHTML=""},500)),document.body.style.overflow="",document.body.classList.remove("modal-open"),document.body.style.paddingRight=M,l.removeEventListener("click",h),document.removeEventListener("keydown",u),n.removeEventListener("input",q),n.removeEventListener("keydown",N),n.removeEventListener("paste",x),o.removeEventListener("click",y)},u=E=>{E.key==="Escape"&&(h(),g())},g=()=>{l.removeEventListener("click",h),document.removeEventListener("keydown",u)},y=E=>{new F().dataProcessing(E,s,r,a,o,n),n.value=""},S=()=>{n.value.trim()==""||!s.checked?(o.style.pointerEvents="none",o.style.background="gray"):(o.style.pointerEvents="",o.style.background="white")};n.addEventListener("input",S),s.addEventListener("change",S),o.style.pointerEvents="none",l.addEventListener("click",h),document.addEventListener("keydown",u),n.addEventListener("input",q),n.addEventListener("keydown",N),n.addEventListener("paste",x),o.addEventListener("click",y),S()});
